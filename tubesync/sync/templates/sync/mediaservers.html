{% extends 'base.html' %}

{% block headtitle %}Media servers{% endblock %}

{% block content %}
<h1 class="truncate">Media servers</h1>
<p class="text-muted-foreground mb-6">
  Media servers are services like Plex which you may be running on your network. If
  you add your media server TubeSync will notify your media server to rescan or
  refresh its libraries every time media is successfully downloaded. Currently,
  TubeSync only supports Jellyfin and Plex.
</p>

{% include 'infobox.html' with message=message %}

<div class="flex flex-wrap gap-3 mb-6">
  {% for mst in media_server_types %}
  <a href="{% url 'sync:add-mediaserver' server_type=mst.long_type %}" class="inline-flex items-center gap-2 px-4 py-2.5 rounded-md bg-primary text-primary-foreground font-medium text-sm hover:bg-accent hover:text-accent-foreground transition-colors">Add a {{ mst.label }} media server <i class="fas fa-server"></i></a>
  {% endfor %}
</div>

<div class="divide-y divide-border rounded-lg border border-border overflow-hidden">
  {% for mediaserver in mediaservers %}
    <a href="{% url 'sync:mediaserver' pk=mediaserver.pk %}" class="block p-4 hover:bg-muted/50 transition-colors">
      {{ mediaserver.icon|safe }} <strong>{{ mediaserver.get_server_type_display }}</strong> server at <strong>{{ mediaserver.url }}</strong>
    </a>
  {% empty %}
    <div class="p-4 text-muted-foreground"><i class="fas fa-info-circle"></i> You haven't added any media servers.</div>
  {% endfor %}
</div>
{% endblock %}
